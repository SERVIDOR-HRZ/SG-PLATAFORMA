<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Inscripciones - Seamos Genios</title>

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../Elementos/css/gestion-inscripciones.css">
    <link rel="shortcut icon" href="../Elementos/img/logo1.png" type="image/x-icon">
</head>

<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" style="display: none;">
        <i class="bi bi-chevron-right"></i>
    </button>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar Panel -->
    <aside class="sidebar-panel" id="sidebarPanel">
        <!-- Perfil Usuario -->
        <div class="sidebar-profile">
            <div class="sidebar-avatar" id="userAvatarContainer">
                <div class="sidebar-avatar-default" id="userAvatarDefault">
                    <i class="bi bi-person-fill"></i>
                </div>
                <img class="sidebar-avatar-image" id="userAvatarImage" style="display: none;" src="" alt="Foto de perfil">
            </div>
            <div class="sidebar-user-name" id="userName">USUARIO</div>
            <div class="sidebar-user-role">Gestión de Inscripciones</div>
        </div>

        <!-- Botón Volver a Finanzas -->
        <div class="sidebar-back-section">
            <button class="sidebar-btn btn-back-finanzas" id="btnBackFinanzas">
                <i class="bi bi-arrow-left-circle"></i>
                <span>Volver a Finanzas</span>
            </button>
        </div>

        <!-- Menú de Navegación -->
        <div class="sidebar-menu">
            <button class="sidebar-menu-item active" id="btnMetodosPago" data-view="metodos-pago">
                <i class="bi bi-credit-card-fill"></i>
                <span>Métodos de Pago</span>
            </button>
            <button class="sidebar-menu-item" id="btnInscritos" data-view="inscritos">
                <i class="bi bi-people-fill"></i>
                <span>Inscritos</span>
            </button>
        </div>

        <!-- Botón Cerrar Sesión -->
        <div class="sidebar-actions">
            <button class="sidebar-btn btn-logout" id="btnLogout">
                <i class="bi bi-box-arrow-right"></i>
                <span>Cerrar Sesión</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-panel-content">
        <!-- Sección Métodos de Pago -->
        <div class="content-section active" id="seccionMetodosPago">
            <div class="section-header">
                <h2><i class="bi bi-credit-card-fill"></i> Métodos de Pago</h2>
                <button class="btn-primary" id="btnNuevoMetodo">
                    <i class="bi bi-plus-circle"></i>
                    Nuevo Método de Pago
                </button>
            </div>

            <!-- Contenido principal -->
            <div class="inscripciones-container">
                <!-- Métodos de Pago Grid -->
                <div class="metodos-pago-grid" id="metodosPagoGrid">
                    <!-- Los métodos de pago se cargarán aquí -->
                </div>

                <!-- Loading Spinner -->
                <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                    <i class="bi bi-arrow-clockwise spin"></i>
                    <p>Cargando métodos de pago...</p>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <i class="bi bi-credit-card"></i>
                    <h3>No hay métodos de pago</h3>
                    <p>Crea tu primer método de pago para comenzar</p>
                </div>
            </div>
        </div>

        <!-- Sección Inscritos -->
        <div class="content-section" id="seccionInscritos">
            <div class="section-header">
                <h2><i class="bi bi-people-fill"></i> Inscritos</h2>
            </div>

            <!-- Contenido de inscritos -->
            <div class="inscripciones-container">
                <div class="empty-state">
                    <i class="bi bi-people"></i>
                    <h3>Próximamente</h3>
                    <p>La gestión de inscritos estará disponible pronto</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal para Crear/Editar Método de Pago -->
    <div class="modal" id="metodoPagoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Nuevo Método de Pago</h3>
                <button class="close-btn" id="closeModal">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="metodoPagoForm">
                    <input type="hidden" id="metodoPagoId">
                    
                    <div class="form-group">
                        <label for="nombreMetodo">Nombre del Método *</label>
                        <input type="text" id="nombreMetodo" required placeholder="Ej: Nequi, Bancolombia, Daviplata">
                    </div>

                    <div class="form-group">
                        <label for="numeroCuenta">Número de Cuenta *</label>
                        <input type="text" id="numeroCuenta" required placeholder="Ej: 3001234567">
                    </div>

                    <div class="form-group">
                        <label for="imagenMetodo">Imagen/Logo *</label>
                        <div class="image-upload-container">
                            <input type="file" id="imagenMetodo" accept="image/*" style="display: none;">
                            <button type="button" class="btn-upload" id="btnUploadImage">
                                <i class="bi bi-cloud-upload"></i>
                                Seleccionar Imagen
                            </button>
                            <div class="image-preview" id="imagePreview" style="display: none;">
                                <button type="button" class="btn-remove-image" id="btnRemoveImage">
                                    <i class="bi bi-x"></i>
                                </button>
                                <img id="previewImg" src="" alt="Preview">
                            </div>
                        </div>
                        <small class="form-hint">Formatos: JPG, PNG. Tamaño recomendado: 200x200px</small>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="activoMetodo" checked>
                            Método activo
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="btnCancelar">Cancelar</button>
                <button type="submit" form="metodoPagoForm" class="btn-primary" id="btnGuardar">
                    <i class="bi bi-save"></i>
                    Guardar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmación para Eliminar -->
    <div class="modal" id="confirmDeleteModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Confirmar Eliminación</h3>
                <button class="close-btn" id="closeConfirmModal">
                    <i class="bi bi-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-message">
                    <i class="bi bi-exclamation-triangle"></i>
                    <p>¿Estás seguro de que deseas eliminar este método de pago?</p>
                    <p class="confirm-name" id="confirmMetodoNombre"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="btnCancelarDelete">Cancelar</button>
                <button type="button" class="btn-danger" id="btnConfirmarDelete">
                    <i class="bi bi-trash"></i>
                    Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div class="notification-toast" id="notificationToast">
        <div class="notification-content">
            <i class="notification-icon" id="notificationIcon"></i>
            <span class="notification-message" id="notificationMessage"></span>
        </div>
        <button class="notification-close" id="notificationClose">
            <i class="bi bi-x"></i>
        </button>
    </div>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script src="../Elementos/js/config.js"></script>
    <script src="../Elementos/js/gestion-inscripciones.js"></script>
</body>

</html>
