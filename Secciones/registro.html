<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - Seamos Genios</title>
    <link rel="stylesheet" href="../Elementos/css/Login.css">
    <link rel="stylesheet" href="../Elementos/css/registro.css">
    <link rel="stylesheet" href="../Elementos/css/seguridad.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="shortcut icon" href="../Elementos/img/logo1.png" type="image/x-icon">

</head>

<body class="registro-page">
    <div class="login-container registro-container">
        <div class="login-form register-form">
            <div class="logo-container">
                <img src="../Elementos/img/logo1.png" alt="Seamos Genios Logo" class="logo">
                <h1>Seamos Genios</h1>
                <p>Crear Nueva Cuenta</p>
            </div>

            <form id="registerForm" class="form">
                <!-- Sección 1: Datos del estudiante -->
                <div id="seccionDatos" class="seccion-registro">
                    <div class="input-group">
                        <label for="email">Usuario</label>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <input type="text" id="username" name="username" placeholder="usuario" required
                                style="flex: 1;">
                            <span
                                style="color: rgba(255, 255, 255, 0.7); font-weight: 500; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">@seamosgenios.com</span>
                        </div>
                        <input type="hidden" id="email" name="email">
                    </div>

                    <div class="input-group">
                        <label for="emailRecuperacion">Correo de recuperación (tu correo principal)</label>
                        <input type="email" id="emailRecuperacion" name="emailRecuperacion"
                            placeholder="correo_de_ejemplo@gmail.com" required>
                    </div>

                    <div class="input-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" name="password" required minlength="6">
                    </div>

                    <div class="input-group">
                        <label for="confirmPassword">Confirmar Contraseña</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label for="primerNombre">Primer Nombre <span style="color: #ff4444;">*</span></label>
                            <input type="text" id="primerNombre" name="primerNombre" placeholder="Ej: DANNA" required>
                        </div>

                        <div class="input-group">
                            <label for="segundoNombre">Segundo Nombre</label>
                            <input type="text" id="segundoNombre" name="segundoNombre" placeholder="Ej: MARIA">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label for="primerApellido">Primer Apellido <span style="color: #ff4444;">*</span></label>
                            <input type="text" id="primerApellido" name="primerApellido" placeholder="Ej: PEREZ" required>
                        </div>

                        <div class="input-group">
                            <label for="segundoApellido">Segundo Apellido</label>
                            <input type="text" id="segundoApellido" name="segundoApellido" placeholder="Ej: GOMEZ">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="telefono">Teléfono</label>
                        <div class="phone-input-container">
                            <button type="button" class="country-selector" id="countrySelector">
                                <span class="flag-emoji">
                                    <img src="https://flagcdn.com/w40/co.png" alt="Colombia" class="flag-img">
                                </span>
                                <span class="country-code">+57</span>
                                <i class="bi bi-chevron-down"></i>
                            </button>
                            <input type="tel" id="telefono" name="telefono" placeholder="300 123 4567" required>
                            <input type="hidden" id="codigoPais" name="codigoPais" value="+57">
                            <input type="hidden" id="telefonoCompleto" name="telefonoCompleto">
                        </div>
                        <div class="country-dropdown" id="countryDropdown" style="display: none;">
                            <div class="country-search">
                                <i class="bi bi-search"></i>
                                <input type="text" id="countrySearch" placeholder="Buscar país...">
                            </div>
                            <div class="country-list" id="countryList"></div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="institucion">Tu institución educativa</label>
                        <div class="institucion-input-container">
                            <button type="button" class="institucion-selector" id="institucionSelector">
                                <span class="institucion-text">Seleccione Institución</span>
                                <i class="bi bi-chevron-down"></i>
                            </button>
                            <input type="hidden" id="institucion" name="institucion" required>
                        </div>
                        <div class="institucion-dropdown" id="institucionDropdown" style="display: none;">
                            <div class="institucion-list" id="institucionList"></div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="departamento">Seleccione Departamento</label>
                        <div class="departamento-input-container">
                            <button type="button" class="departamento-selector" id="departamentoSelector">
                                <span class="departamento-text">Seleccione Departamento</span>
                                <i class="bi bi-chevron-down"></i>
                            </button>
                            <input type="hidden" id="departamento" name="departamento" required>
                        </div>
                        <div class="departamento-dropdown" id="departamentoDropdown" style="display: none;">
                            <div class="departamento-search">
                                <i class="bi bi-search"></i>
                                <input type="text" id="departamentoSearch" placeholder="Buscar departamento...">
                            </div>
                            <div class="departamento-list" id="departamentoList"></div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="grado">Seleccione Grado</label>
                        <select id="grado" name="grado" required>
                            <option value="">Seleccione Grado</option>
                            <option value="PRESABER">PRESABER</option>
                            <option value="REPITENTE">REPITENTE</option>
                            <option value="VALIDANTE">VALIDANTE</option>
                            <option value="SABER11">SABER11</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="tipoDocumento">Tipo de Documento</label>
                        <select id="tipoDocumento" name="tipoDocumento" required>
                            <option value="">Tipo de Documento</option>
                            <option value="CC">CC</option>
                            <option value="TI">TI</option>
                            <option value="CE">CE</option>
                            <option value="PA">PA</option>
                            <option value="NIT">NIT</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="numeroDocumento">Número de Documento</label>
                        <input type="text" id="numeroDocumento" name="numeroDocumento" required>
                    </div>

                    <div class="input-group">
                        <label for="aula">Seleccione Calendario</label>
                        <select id="aula" name="aula" required>
                            <option value="">Seleccione Calendario</option>
                        </select>
                    </div>

                    <div class="button-group">
                        <a href="login.html" class="login-btn back-btn">Volver al Login</a>
                        <button type="button" id="btnContinuarPago" class="login-btn register-btn">Continuar</button>
                    </div>
                </div>

                <!-- Sección 2: Información de pago -->
                <div id="seccionPago" class="seccion-registro" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px; color: #fff;">Información de Pago</h3>
                    
                    <div class="pago-container">
                        <!-- Información del aula -->
                        <div class="pago-info-card">
                            <div class="pago-detalle">
                                <label>Calendario Seleccionado:</label>
                                <span id="aulaSeleccionadaNombre">-</span>
                            </div>
                            <div class="pago-detalle">
                                <label>Valor Total:</label>
                                <span id="valorTotal" style="font-size: 1.5rem; font-weight: bold; color: #4CAF50;">$0</span>
                            </div>
                            <div class="pago-detalle">
                                <label>Pago Inicial:</label>
                                <span id="pagoInicial" style="font-size: 1.3rem; font-weight: bold; color: #2196F3;">$0</span>
                            </div>
                            <div class="pago-detalle">
                                <label>Número de Cuotas:</label>
                                <span id="numeroCuotas">0</span>
                            </div>
                            <div class="pago-detalle">
                                <label>Valor por Cuota:</label>
                                <span id="valorCuota">$0</span>
                            </div>
                        </div>

                        <!-- Métodos de pago disponibles -->
                        <div class="metodos-pago-container">
                            <h4 style="color: #fff; margin-bottom: 15px; text-align: center;">Selecciona tu Método de Pago</h4>
                            <div id="metodosPagoGrid" class="metodos-pago-grid">
                                <!-- Los métodos de pago se cargarán dinámicamente aquí -->
                            </div>
                            <input type="hidden" id="metodoPagoEstudiante" name="metodoPagoEstudiante" required>
                            <input type="hidden" id="metodoPagoId" name="metodoPagoId">
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" id="btnVolverDatos" class="login-btn back-btn">Volver</button>
                        <button type="button" id="btnContinuarComprobante" class="login-btn register-btn">Continuar</button>
                    </div>
                </div>

                <!-- Sección 3: Comprobante de pago -->
                <div id="seccionComprobante" class="seccion-registro" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px; color: #fff;">Comprobante de Pago</h3>
                    
                    <div class="comprobante-container">
                        <!-- Información de pago a realizar -->
                        <div class="pago-info-card">
                            <h4 style="color: #fff; margin-bottom: 15px; text-align: center;">Valor a Pagar</h4>
                            <div class="pago-detalle">
                                <label>Pago Inicial:</label>
                                <span id="pagoInicialComprobante" style="font-size: 1.8rem; font-weight: bold; color: #4CAF50;">$0</span>
                            </div>
                            <div class="pago-detalle">
                                <label>Calendario:</label>
                                <span id="aulaComprobante">-</span>
                            </div>
                        </div>

                        <!-- Información de la cuenta y comprobante -->
                        <div class="cuenta-comprobante-card">
                            <h4 style="color: #fff; margin-bottom: 15px; text-align: center;">Información de la Cuenta</h4>
                            
                            <!-- Datos del método de pago seleccionado -->
                            <div class="metodo-seleccionado-info">
                                <img id="metodoPagoImagen" src="" alt="Método de pago" class="metodo-logo-grande">
                                <div class="metodo-datos">
                                    <div class="metodo-nombre-grande" id="metodoPagoNombre">-</div>
                                    <div class="metodo-cuenta-grande">
                                        <i class="bi bi-credit-card"></i>
                                        <span id="metodoPagoCuenta">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Subir comprobante -->
                            <div class="upload-comprobante-section">
                                <label style="color: #fff; font-weight: 600; margin-bottom: 10px; display: block;">
                                    Subir Comprobante de Pago <span style="color: #ff4444;">*</span>
                                </label>
                                <div class="upload-area" id="uploadArea">
                                    <i class="bi bi-cloud-upload" style="font-size: 3rem; color: rgba(255,255,255,0.5);"></i>
                                    <p style="color: rgba(255,255,255,0.7); margin: 10px 0;">Haz clic o arrastra tu comprobante aquí</p>
                                    <p style="color: rgba(255,255,255,0.5); font-size: 0.85rem;">PNG, JPG o PDF (máx. 5MB)</p>
                                    <input type="file" id="comprobanteInput" accept="image/*,.pdf" style="display: none;">
                                </div>
                                
                                <!-- Preview del comprobante -->
                                <div id="comprobantePreview" class="comprobante-preview" style="display: none;">
                                    <img id="comprobanteImg" src="" alt="Comprobante">
                                    <button type="button" class="btn-remove-comprobante" id="btnRemoveComprobante">
                                        <i class="bi bi-x-circle"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" id="btnVolverMetodo" class="login-btn back-btn">Volver</button>
                        <button type="submit" class="login-btn register-btn">Registrar</button>
                    </div>
                </div>
            </form>

            <div id="message" class="message"></div>
        </div>
    </div>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script src="../Elementos/js/config.js"></script>
    <script src="../Elementos/js/registro.js"></script>
    <script src="../Elementos/js/seguridad.js"></script>
</body>

</html>