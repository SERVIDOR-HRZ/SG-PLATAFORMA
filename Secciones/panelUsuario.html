<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración de Usuario - Seamos Genios</title>
    
    <!-- Security headers -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../Elementos/css/panel.css">
    <link rel="stylesheet" href="../Elementos/css/panel-usuario.css">
    <link rel="shortcut icon" href="../Elementos/img/logo1.png" type="image/x-icon">

</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <img src="../Elementos/img/logo1.png" alt="Seamos Genios Logo" class="header-logo">
            <h1>Configuración de Usuario</h1>
        </div>
        <div class="header-right">
            <button class="back-btn" id="backBtn">
                <i class="bi bi-arrow-left"></i>
                Volver
            </button>
            <button class="logout-btn" id="logoutBtn">
                <i class="bi bi-box-arrow-right"></i>
                Cerrar Sesión
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="configuracion-container">
            <!-- Navegación por pestañas -->
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="perfil">
                    <i class="bi bi-person-circle"></i>
                    Perfil
                </button>
                <button class="tab-btn" data-tab="informacion">
                    <i class="bi bi-file-person"></i>
                    Información
                </button>
                <button class="tab-btn" data-tab="seguridad">
                    <i class="bi bi-shield-lock"></i>
                    Seguridad
                </button>
            </div>

            <!-- Tab Content: Perfil -->
            <div class="tab-content active" data-content="perfil">
                <!-- Sección de Foto de Perfil -->
                <div class="perfil-seccion">
                    <h2>Foto de Perfil</h2>
                <div class="foto-perfil-container">
                    <div class="foto-perfil-preview" id="fotoPerfilPreview">
                        <div class="foto-avatar" id="fotoAvatar">
                            <i class="bi bi-person-fill"></i>
                        </div>
                        <img class="foto-imagen" id="fotoImagen" style="display: none;" src="" alt="Foto de perfil">
                    </div>
                    <div class="foto-perfil-acciones">
                        <button class="btn btn-primary" id="cambiarFotoBtn">
                            <i class="bi bi-camera-fill"></i>
                            Cambiar Foto
                        </button>
                        <button class="btn btn-danger" id="eliminarFotoBtn" style="display: none;">
                            <i class="bi bi-trash-fill"></i>
                            Eliminar Foto
                        </button>
                        <p class="foto-ayuda">
                            <i class="bi bi-info-circle"></i>
                            Tamaño máximo: 5MB. Formatos: JPG, PNG, GIF
                        </p>
                    </div>
                </div>
            </div>
            </div>

            <!-- Tab Content: Información -->
            <div class="tab-content" data-content="informacion">
                <!-- Sección de Información Personal -->
                <div class="informacion-seccion">
                <h2>Información Personal</h2>
                <form class="formulario-usuario" id="formularioUsuario">
                    <div class="form-grupo">
                        <label for="nombre">
                            <i class="bi bi-person"></i>
                            Nombre Completo
                        </label>
                        <input type="text" id="nombre" name="nombre" class="form-control" required>
                    </div>

                    <div class="form-grupo">
                        <label for="email">
                            <i class="bi bi-envelope"></i>
                            Correo Electrónico
                        </label>
                        <input type="email" id="email" name="email" class="form-control" required>
                    </div>

                    <div class="form-grupo">
                        <label for="telefono">
                            <i class="bi bi-telephone"></i>
                            Teléfono
                        </label>
                        <input type="tel" id="telefono" name="telefono" class="form-control">
                    </div>

                    <div class="form-grupo">
                        <label for="fechaNacimiento">
                            <i class="bi bi-calendar-heart"></i>
                            Fecha de Nacimiento
                        </label>
                        <input type="date" id="fechaNacimiento" name="fechaNacimiento" class="form-control">
                    </div>

                    <div class="form-grupo">
                        <label for="documento">
                            <i class="bi bi-card-text"></i>
                            Documento de Identidad
                        </label>
                        <input type="text" id="documento" name="documento" class="form-control" readonly>
                    </div>

                    <div class="form-grupo">
                        <label for="tipoUsuario">
                            <i class="bi bi-shield-check"></i>
                            Tipo de Usuario
                        </label>
                        <input type="text" id="tipoUsuario" name="tipoUsuario" class="form-control" readonly>
                    </div>

                    <div class="form-grupo">
                        <label for="fechaCreacion">
                            <i class="bi bi-calendar"></i>
                            Miembro desde
                        </label>
                        <input type="text" id="fechaCreacion" name="fechaCreacion" class="form-control" readonly>
                    </div>

                    <div class="form-acciones">
                        <button type="button" class="btn btn-secondary" id="cancelarBtn">
                            <i class="bi bi-x-circle"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-circle"></i>
                            Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>

            <!-- Sección de Información Pública -->
            <div class="informacion-publica-seccion">
                <h2>Información Pública del Perfil</h2>
                <p class="seccion-descripcion">Esta información será visible para otros usuarios de la plataforma</p>
                <form class="formulario-publico" id="formularioPublico">
                    <div class="form-grupo full-width">
                        <label for="biografia">
                            <i class="bi bi-file-text"></i>
                            Biografía / Descripción
                        </label>
                        <textarea id="biografia" name="biografia" class="form-control textarea-biografia" 
                                  rows="4" maxlength="500" 
                                  placeholder="Cuéntanos un poco sobre ti (máximo 500 caracteres)"></textarea>
                        <small class="char-counter" id="bioCharCounter">0 / 500 caracteres</small>
                    </div>

                    <div class="form-grupo">
                        <label for="profesion">
                            <i class="bi bi-briefcase"></i>
                            Profesión / Cargo
                        </label>
                        <input type="text" id="profesion" name="profesion" class="form-control" 
                               placeholder="Ej: Profesor de Matemáticas, Estudiante de 11°">
                    </div>

                    <div class="form-grupo">
                        <label for="especialidad">
                            <i class="bi bi-star"></i>
                            Especialidad / Área de Interés
                        </label>
                        <input type="text" id="especialidad" name="especialidad" class="form-control" 
                               placeholder="Ej: Cálculo, Física, Literatura">
                    </div>

                    <div class="form-grupo">
                        <label for="ciudad">
                            <i class="bi bi-geo-alt"></i>
                            Ciudad
                        </label>
                        <input type="text" id="ciudad" name="ciudad" class="form-control" 
                               placeholder="Ej: Bogotá, Medellín">
                    </div>

                    <div class="form-grupo">
                        <label for="institucionPublica">
                            <i class="bi bi-building"></i>
                            Institución Educativa
                        </label>
                        <input type="text" id="institucionPublica" name="institucionPublica" class="form-control" 
                               placeholder="Nombre de tu institución">
                    </div>

                    <div class="redes-sociales-grupo">
                        <h3>
                            <i class="bi bi-share"></i>
                            Redes Sociales (Opcional)
                        </h3>
                        <div class="redes-grid">
                            <div class="form-grupo">
                                <label for="linkedin">
                                    <i class="bi bi-linkedin"></i>
                                    LinkedIn
                                </label>
                                <input type="url" id="linkedin" name="linkedin" class="form-control" 
                                       placeholder="https://linkedin.com/in/tu-perfil">
                            </div>

                            <div class="form-grupo">
                                <label for="twitter">
                                    <i class="bi bi-twitter"></i>
                                    Twitter
                                </label>
                                <input type="text" id="twitter" name="twitter" class="form-control" 
                                       placeholder="@tuusuario">
                            </div>

                            <div class="form-grupo">
                                <label for="instagram">
                                    <i class="bi bi-instagram"></i>
                                    Instagram
                                </label>
                                <input type="text" id="instagram" name="instagram" class="form-control" 
                                       placeholder="@tuusuario">
                            </div>

                            <div class="form-grupo">
                                <label for="facebook">
                                    <i class="bi bi-facebook"></i>
                                    Facebook
                                </label>
                                <input type="url" id="facebook" name="facebook" class="form-control" 
                                       placeholder="https://facebook.com/tu-perfil">
                            </div>
                        </div>
                    </div>

                    <div class="form-acciones">
                        <button type="button" class="btn btn-secondary" id="cancelarPublicoBtn">
                            <i class="bi bi-x-circle"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-circle"></i>
                            Guardar Información Pública
                        </button>
                    </div>
                </form>
            </div>
            </div>



            <!-- Tab Content: Seguridad -->
            <div class="tab-content" data-content="seguridad">
                <!-- Sección de Cambio de Contraseña -->
            <div class="password-seccion">
                <h2>Cambiar Contraseña</h2>
                <form class="formulario-password" id="formularioPassword">
                    <div class="form-grupo">
                        <label for="passwordActual">
                            <i class="bi bi-lock"></i>
                            Contraseña Actual
                        </label>
                        <div class="password-input-grupo">
                            <input type="password" id="passwordActual" name="passwordActual" class="form-control" required>
                            <button type="button" class="toggle-password" data-target="passwordActual">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-grupo">
                        <label for="passwordNueva">
                            <i class="bi bi-lock-fill"></i>
                            Contraseña Nueva
                        </label>
                        <div class="password-input-grupo">
                            <input type="password" id="passwordNueva" name="passwordNueva" class="form-control" required minlength="6">
                            <button type="button" class="toggle-password" data-target="passwordNueva">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <small class="form-texto-ayuda">Mínimo 6 caracteres</small>
                    </div>

                    <div class="form-grupo">
                        <label for="passwordConfirmar">
                            <i class="bi bi-lock-fill"></i>
                            Confirmar Contraseña Nueva
                        </label>
                        <div class="password-input-grupo">
                            <input type="password" id="passwordConfirmar" name="passwordConfirmar" class="form-control" required>
                            <button type="button" class="toggle-password" data-target="passwordConfirmar">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-acciones">
                        <button type="submit" class="btn btn-warning">
                            <i class="bi bi-key-fill"></i>
                            Cambiar Contraseña
                        </button>
                    </div>
                </form>
            </div>
            </div>
        </div>
    </main>



    <!-- Modal: Confirmar Eliminación -->
    <div class="modal-overlay" id="confirmarEliminarModal">
        <div class="modal-dialog modal-sm">
            <div class="modal-header">
                <h3>Confirmar Eliminación</h3>
            </div>
            <div class="modal-body text-center">
                <i class="bi bi-exclamation-triangle" style="font-size: 48px; color: #ffc107; margin-bottom: 20px;"></i>
                <p id="confirmarEliminarMensaje">¿Estás seguro de eliminar este elemento?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelarEliminarBtn">
                    <i class="bi bi-x-lg"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-danger" id="confirmarEliminarBtn">
                    <i class="bi bi-trash"></i>
                    Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p class="loading-texto">Cargando...</p>
    </div>



    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script src="../Elementos/js/config.js"></script>
    <script src="../Elementos/js/panel-usuario.js"></script>
</body>

</html>

